os: linux
dist: trusty
sudo: required
language: cpp
compiler: clang

before_install:
  - sudo add-apt-repository --yes ppa:beineri/opt-qt58-trusty
  - sudo apt-get update -qq
#  - sudo apt-get install -qq qt5-qmake qtbase5-dev libqt5quick5 libqt5qml5 libqt5sensors5-dev libqt5multimedia5 libqt5multimediawidgets5 libqt5webkit5-dev libqt5svg5
  - sudo apt-get install libmicrohttpd-dev
  - sudo apt-get install libpulse-dev
  - sudo apt-get install qt58-meta-full
  - source /opt/qt58/bin/qt58-env.sh
  - qmake --version  
  - git clone https://github.com/grame-cncm/guidolib.git guidolib
  - make -C guidolib/build linux LINUXMIDI=no
  - sudo make -C guidolib/build/linux install
  - git clone https://github.com/grame-cncm/guidoar.git guidoar
  - make -C guidoar/build MIDIEXPORT=no
  - sudo make -C guidoar/build/linux install
 
branches:
  only:
  - dev
  - master

script: make -C build 
